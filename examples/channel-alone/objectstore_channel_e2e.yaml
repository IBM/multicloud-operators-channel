# this only test the channel namespace promotion logic. TODO: need to find a way
# to test the object store got the promoted object
--- 
apiVersion: apps.open-cluster-management.io/v1
kind: Deployable
metadata: 
  name: payload-cfg-obj-channel
  annotations: 
    app.ibm.com/is-local-deployable: "false"
  namespace: default
spec: 
  channels: 
  - backend-test
  template: 
    apiVersion: v1
    data: 
      database: mongodb
    kind: ConfigMap
    metadata: 
      name: cfg-from-ch-qa
---
apiVersion: v1
kind: Namespace
metadata:
  name: ch-obj
---
apiVersion: apps.open-cluster-management.io/v1
kind: Channel
metadata:
  name: backend-test
  namespace: ch-obj
spec:
  type: ObjectBucket
  pathname: http://minio-minio.apps.hivemind-b.aws.red-chesterfield.com/backend-test
  sourceNamespaces:
    - default
  secretRef:
    name: dev
---
apiVersion: v1
kind: Secret
metadata:
  name: dev
  namespace: ch-obj
data:
  AccessKeyID: OFd6TUFOTWhGMUROd2ZCeGw1MnEK #<base64 encode username>
  SecretAccessKey: SjhVUW8wczVWWThjWm1GdzR1NURkQzQ3dWZCN1h2TXZEalQ1U2cwcQo= #<base64 encode password>
